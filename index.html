<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Comms Checker</title>
  <style>
    :root{
      --bg:#ffffff;
      --card:#ffffff;
      --line:#e5e7eb;
      --text:#111827;
      --muted:#6b7280;
      --green:#16a34a;
      --yellow:#d97706;
      --red:#dc2626;
      --blue:#2563eb;
      --shadow:0 1px 2px rgba(0,0,0,.06);
      --shadow2:0 8px 24px rgba(0,0,0,.06);
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Apple SD Gothic Neo,Noto Sans KR,sans-serif;
      background:var(--bg);
      color:var(--text);
    }
    .wrap{max-width:980px; margin:0 auto; padding:24px 16px 56px;}
    h1{font-size:26px; margin:0 0 8px;}
    .sub{color:var(--muted); line-height:1.6; margin:0 0 16px;}

    .card{background:var(--card); border:1px solid var(--line); border-radius:14px; padding:16px; margin:12px 0; box-shadow:var(--shadow);}
    .row{display:flex; gap:12px; flex-wrap:wrap; align-items:center;}
    label{font-size:13px; color:var(--muted)}

    select, textarea{
      border-radius:12px;
      border:1px solid var(--line);
      background:#ffffff;
      color:var(--text);
      padding:10px 12px;
      font-size:14px;
    }
    select{min-width:260px}
    textarea{width:100%; min-height:220px; resize:vertical; line-height:1.6}

    button{
      border-radius:12px;
      border:1px solid #6b7280;
      background:#6b7280;
      color:#ffffff;
      padding:10px 14px;
      font-size:14px;
      font-weight:800;
      cursor:pointer;
      box-shadow:var(--shadow);
    }
    button:hover{background:#4b5563; border-color:#4b5563}
    button:disabled{opacity:.55; cursor:not-allowed}

    .hint{color:var(--muted); font-size:12px; margin-top:6px}
    .meta{display:flex; align-items:center; gap:10px; flex-wrap:wrap}

    .pill{display:inline-flex; align-items:center; gap:8px; border:1px solid var(--line); border-radius:999px; padding:6px 10px; font-size:12px; color:var(--muted); background:#ffffff}
    .dot{width:10px; height:10px; border-radius:999px; display:inline-block}
    .g{background:var(--green)}
    .y{background:var(--yellow)}
    .r{background:var(--red)}

    details{border:1px solid var(--line); border-radius:12px; padding:12px; background:#f9fafb}
    summary{cursor:pointer; user-select:none; font-weight:800}
    summary::-webkit-details-marker{display:none}

    .counter{font-size:12px; color:var(--muted)}

    .result{display:none}
    .resultTop{display:flex; gap:12px; flex-wrap:wrap; align-items:center}
    .badge{display:inline-flex; align-items:center; gap:8px; border-radius:999px; padding:6px 10px; font-size:12px; font-weight:900; border:1px solid var(--line); background:#ffffff}
    .bGreen{border-color:rgba(22,163,74,.35)}
    .bYellow{border-color:rgba(217,119,6,.35)}
    .bRed{border-color:rgba(220,38,38,.35)}

    .grid{display:grid; grid-template-columns:1fr; gap:12px}
    @media (min-width:900px){ .grid{grid-template-columns:1fr 1fr} }

    .sectionTitle{font-weight:900; margin:0 0 8px}
    ul{margin:0; padding-left:18px}
    li{margin:6px 0}

    .kpi{display:flex; gap:10px; flex-wrap:wrap; align-items:center; margin-top:10px}
    .kpi .pill{color:var(--text); background:#f9fafb}
    .hr{height:1px; background:var(--line); margin:14px 0}

    .footnote{color:var(--muted); font-size:12px; margin-top:10px}
    .muted{color:var(--muted)}

    .legend{display:flex; gap:12px; flex-wrap:wrap; align-items:flex-start}
    .legendItem{border:1px solid var(--line); border-radius:12px; padding:8px 10px; background:#ffffff; min-width:220px; box-shadow:var(--shadow)}
    .legendTop{font-size:12px; font-weight:900}
    .legendSub{font-size:12px; color:var(--muted); margin-top:4px; line-height:1.4}
  
.sr-only{position:absolute!important;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}

.introLine{margin:8px 0 18px;line-height:1.7}
</style>
</head>
<body>
  <div class="wrap">
    <h1>Comms Checker</h1>
    <p class="muted introLine">ë³´ë„ìë£ŒÂ·ì‚¬ë‚´ê³µì§€Â·ë³´ê³ ì„œ ë“± ì—…ë¬´ìš© ê¸€ì“°ê¸°ì—ì„œ ì˜¤í•´ê°€ ë°œìƒí•  ìˆ˜ ìˆëŠ” ì§€ì ì„ ì‚¬ì „ì— ì ê²€í•˜ëŠ” ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ íŒë‹¨ ë³´ì¡° ë„êµ¬ì…ë‹ˆë‹¤.</p>
    <p class="sr-only">ì´ ì‚¬ì´íŠ¸ëŠ” ê¸€ì“°ê¸° ì ê²€ê³¼ ì—…ë¬´ìš© ê¸€ì“°ê¸°ë¥¼ ìœ„í•œ ë„êµ¬ë¡œ, ë³´ë„ìë£Œ ì ê²€, ì‚¬ë‚´ê³µì§€ ë¬¸ì¥ ì ê²€, ë³´ê³ ì„œ ë¬¸ì¥ ì •ë¦¬ ë“± ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ ì˜¤í•´ ê°€ëŠ¥ì„±ì„ ì‚¬ì „ì— í™•ì¸í•  ìˆ˜ ìˆë„ë¡ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤. This tool helps PR and marketing professionals evaluate message clarity before publishing and identify potential points of misinterpretation.</p>


    <p class="sub">ì¹´í…Œê³ ë¦¬(íŒë‹¨ ê´€ì ) ê¸°ì¤€ìœ¼ë¡œ ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ ë¬¸ì¥ì„ ì ê²€í•©ë‹ˆë‹¤. ê²°ê³¼ëŠ” â€˜ì •ë‹µ/ì˜¤ë‹µâ€™ì´ ì•„ë‹ˆë¼, íŒë‹¨ìê°€ ì–´ë””ì—ì„œ ë©ˆì¶”ê±°ë‚˜ ì˜¤í•´í•  ê°€ëŠ¥ì„±ì´ ë†’ì€ì§€ì— ëŒ€í•œ ì‹ í˜¸ì…ë‹ˆë‹¤.</p>

    <section class="card" aria-label="ì•ˆë‚´">
      <div class="sectionTitle">ì•ˆë‚´</div>
      <p class="muted" style="margin:0 0 12px">
        ì´ íˆ´ì€ ë¬¸ì¥ì„ ìˆ˜ì •í•˜ê±°ë‚˜ ëŒ€ì‹  ì‘ì„±í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì…ë ¥ëœ ë¬¸ì¥ì„ ì²´í¬ë¦¬ìŠ¤íŠ¸ ë°©ì‹ìœ¼ë¡œ ì ê²€í•©ë‹ˆë‹¤. ìµœì¢… íŒë‹¨ê³¼ ìˆ˜ì •ì€ ì‘ì„±ìì˜ ëª«ì…ë‹ˆë‹¤.
      </p>

      <details>
        <summary>ì‚¬ìš© ë°©ë²• (ì ‘ê¸°/ë”ë³´ê¸°)</summary>
        <ol class="muted" style="margin:10px 0 0; padding-left:18px; line-height:1.7">
          <li>ìƒë‹¨ì—ì„œ ì¹´í…Œê³ ë¦¬ë¥¼ ì„ íƒí•©ë‹ˆë‹¤.</li>
          <li>ì ê²€í•  ê¸€(ìµœëŒ€ 1,200ì)ì„ ì…ë ¥í•©ë‹ˆë‹¤.</li>
          <li>ì ê²€í•˜ê¸°ë¥¼ ëˆ„ë¥´ë©´ í•˜ë‹¨ì— <b>ê³µí†µ ì ê²€</b>ê³¼ <b>ì¹´í…Œê³ ë¦¬ ì ê²€</b> ê²°ê³¼ê°€ ë‚˜ì˜µë‹ˆë‹¤.</li>
        </ol>
      </details>

      <div style="margin-top:14px">
        <label for="category">ì¹´í…Œê³ ë¦¬ ì„ íƒ (íŒë‹¨ ê´€ì )</label>
        <div class="meta" style="margin-top:6px">
          <select id="category">
            <option value="press_release">Press Release (ì™¸ë¶€/ê¸°ì)</option>
            <option value="c_level">C-level ë©”ì‹œì§€ (ë¦¬ë”/ì¡°ì§)</option>
            <option value="internal_notice">ë‚´ë¶€ ì•ˆë‚´ (êµ¬ì„±ì›/ì‹¤ë¬´ì)</option>
            <option value="work_report">ì—…ë¬´ ë³´ê³  (ìƒì‚¬/ì˜ì‚¬ê²°ì •ì)</option>
            <option value="sns">SNS ê¸€ (ëŒ€ì¤‘/íŒ”ë¡œì›Œ)</option>
          </select>

          <div class="legend" aria-label="íŒë‹¨ ë¦¬ìŠ¤í¬ ì‹ í˜¸">
            <div class="legendItem">
              <div class="legendTop">ğŸŸ¢ ì˜ë¯¸ê°€ ë¹„êµì  ëª…í™•í•¨</div>
              <div class="legendSub">(ì˜¤í•´ì˜ ì—¬ì§€ê°€ ì ê³  ì‰½ê²Œ ì´í•´ë¨)</div>
            </div>
            <div class="legendItem">
              <div class="legendTop">ğŸŸ¡ ì˜¤í•´ì˜ ì—¬ì§€ ìˆìŒ</div>
              <div class="legendSub">(ì½ëŠ” ì‚¬ëŒì— ë”°ë¼ í•´ì„ì´ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìŒ)</div>
            </div>
            <div class="legendItem">
              <div class="legendTop">ğŸ”´ ì˜¤í•´ ê°€ëŠ¥ì„± í¼</div>
              <div class="legendSub">(ë§¥ë½Â·ê·¼ê±° ë³´ì™„ì´ í•„ìš”í•¨)</div>
            </div>
          </div>
        </div>
        <div class="hint" id="categoryHint"></div>
        <div class="hint" style="margin-top:8px">
          ì„ íƒí•œ ì¹´í…Œê³ ë¦¬ì˜ íŒë‹¨ìì—ê²Œ ì˜¤í•´ì˜ ì—¬ì§€ê°€ ìˆê±°ë‚˜ íŒë‹¨ì˜ ì–´ë ¤ì›€ì„ ê²ªì„ ê°€ëŠ¥ì„±ì´ ìˆëŠ”ì§€ë¥¼ ë³´ì—¬ì£¼ëŠ” ì‹ í˜¸ì…ë‹ˆë‹¤.
        </div>
      </div>
    </section>

    <section class="card" aria-label="ì…ë ¥">
      <div class="sectionTitle">ì ê²€í•  ë¬¸ì¥ ì…ë ¥</div>
      <label for="inputText">í…ìŠ¤íŠ¸</label>
      <textarea id="inputText" placeholder="ì—¬ê¸°ì— ì ê²€í•  ë¬¸ì¥ì„ ë¶™ì—¬ë„£ìœ¼ì„¸ìš”."></textarea>
      <div class="row" style="justify-content:space-between; margin-top:10px">
        <div class="counter" id="counter">0 / 1200</div>
        <button id="checkBtn" type="button" onclick="runCheck()">ì ê²€í•˜ê¸°</button>
      </div>
      <div class="footnote">ê¶Œì¥: ê¸´ ë¬¸ì„œëŠ” í•µì‹¬ ë¬¸ë‹¨/ì„¹ì…˜ ë‹¨ìœ„ë¡œ ë‚˜ëˆ  ì ê²€í•˜ì„¸ìš”.</div>
    </section>

    <section class="card result" id="resultWrap" aria-label="ê²°ê³¼">
      <div class="sectionTitle">ì ê²€ ê²°ê³¼</div>

      <div class="resultTop">
        <span class="badge" id="verdictBadge">-</span>
        <div class="muted" id="verdictMsg"></div>
      </div>

      <div class="kpi" id="kpiRow"></div>

      <div class="hr"></div>

      <div class="grid">
        <div>
          <div class="sectionTitle">â–¶ ê³µí†µ ì ê²€ ê²°ê³¼</div>
          <ul id="commonList"></ul>
        </div>
        <div>
          <div class="sectionTitle">â–¶ ì¹´í…Œê³ ë¦¬ ì ê²€ ê²°ê³¼</div>
          <ul id="categoryList"></ul>
        </div>
      </div>

      <div class="hr"></div>
      <div class="footnote">ì´ ê²°ê³¼ëŠ” ê·œì¹™ ê¸°ë°˜ ì ê²€ì…ë‹ˆë‹¤. ìµœì¢… íŒë‹¨ê³¼ ìˆ˜ì •ì€ ì‘ì„±ìì˜ ëª«ì…ë‹ˆë‹¤.</div>
    </section>

  </div>

  <script>
    const MAX_LEN = 1200;

    const categoryMeta = {
      press_release: {
        label: "Press Release",
        hint: "ì™¸ë¶€ ë…ì/ê¸°ì ê´€ì ì—ì„œ ê¸°ì‚¬í™” ê°€ëŠ¥ì„±ê³¼ ì˜¤í•´ ì†Œì§€ë¥¼ ì ê²€í•©ë‹ˆë‹¤."
      },
      c_level: {
        label: "C-level ë©”ì‹œì§€",
        hint: "ë¦¬ë”ì˜ í•´ì„ê³¼ ë°©í–¥(ê¸°ì¤€)ì´ ë¬¸ì¥ì— ë“œëŸ¬ë‚˜ëŠ”ì§€ ì ê²€í•©ë‹ˆë‹¤."
      },
      internal_notice: {
        label: "ë‚´ë¶€ ì•ˆë‚´",
        hint: "êµ¬ì„±ì›ì´ ì½ê³  ë°”ë¡œ ì´í•´Â·í–‰ë™í•  ìˆ˜ ìˆëŠ”ì§€ ì ê²€í•©ë‹ˆë‹¤."
      },
      work_report: {
        label: "ì—…ë¬´ ë³´ê³ ",
        hint: "ì˜ì‚¬ê²°ì •ì— í•„ìš”í•œ ì •ë³´(ê²°ë¡ /ê·¼ê±°/ìš”ì²­)ê°€ ì •ë¦¬ë˜ì–´ ìˆëŠ”ì§€ ì ê²€í•©ë‹ˆë‹¤."
      },
      sns: {
        label: "SNS ê¸€",
        hint: "ì§§ì€ ë¬¸ì¥ ì•ˆì—ì„œ ë§¥ë½ ë¶€ì¡±, ë‹¨ì • í‘œí˜„, ì˜¤í•´ ê°€ëŠ¥ì„±ì„ ì ê²€í•©ë‹ˆë‹¤."
      }
    };

    function norm(t){
      return (t || "").replace(/\r/g, "");
    }

    function splitLines(t){
      return norm(t).split("\n").map(s => s.trim()).filter(Boolean);
    }

    function hasAny(t, arr){
      return arr.some(w => t.includes(w));
    }

    function countMatches(t, re){
      const m = t.match(re);
      return m ? m.length : 0;
    }

    function extractDates(t){
      const out = [];
      const re1 = /\b(20\d{2})[.\/-](\d{1,2})[.\/-](\d{1,2})\b/g;
      const re2 = /(\d{1,2})\s*ì›”\s*(\d{1,2})\s*ì¼/g;
      let m;
      while((m = re1.exec(t)) !== null) out.push(m[0]);
      while((m = re2.exec(t)) !== null) out.push(m[0]);
      return [...new Set(out)];
    }

    function extractContacts(t){
      const emails = [...new Set((t.match(/[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}/gi) || []))];
      const phones = [...new Set((t.match(/\b(\d{2,4}[- ]?\d{3,4}[- ]?\d{4})\b/g) || []))];
      return { emails, phones };
    }

    function makeItem(title, level, msg){
      return { title, level, msg };
    }

    function summarize(items){
      const g = items.filter(i => i.level === "g").length;
      const y = items.filter(i => i.level === "y").length;
      const r = items.filter(i => i.level === "r").length;
      return { g, y, r, total: items.length };
    }

    function verdictFrom(allItems){
      const s = summarize(allItems);
      // ê°„ë‹¨í•˜ê³  ì•ˆì •ì ì¸ ê·œì¹™
      if(s.r >= 2) return "RED";
      if(s.r === 1) return "YELLOW";
      if(s.y >= 3) return "YELLOW";
      return "GREEN";
    }

    function commonChecks(text){
      const t = norm(text);
      const lines = splitLines(text);
      const items = [];

      // 1) ì£¼ì²´/ëŒ€ìƒ
      const hasSubject = hasAny(t, ["ìš°ë¦¬", "ë‹¹ì‚¬", "íšŒì‚¬", "íŒ€", "ì¡°ì§", "ë³¸ì‚¬", "ê³ ê°", "êµ¬ì„±ì›", "ì—¬ëŸ¬ë¶„", "~ë‹˜"]);
      items.push(makeItem(
        "ì£¼ì²´/ëŒ€ìƒì´ ëª…í™•í•œê°€",
        hasSubject ? "g" : "y",
        hasSubject ? "ì£¼ì²´/ëŒ€ìƒ ë‹¨ì„œê°€ ìˆìŠµë‹ˆë‹¤." : "ëˆ„ê°€ ë§í•˜ê³ , ëˆ„ê°€ ëŒ€ìƒì¸ì§€ê°€ íë¦¿í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì£¼ì²´/ëŒ€ìƒì„ 1ë²ˆë§Œì´ë¼ë„ ëª…ì‹œí•˜ì„¸ìš”."
      ));

      // 2) ì‚¬ì‹¤/í•´ì„ êµ¬ë¶„
      const hasNums = /\d/.test(t);
      const hasFactWords = hasAny(t, ["ë°œí‘œ", "ì§„í–‰", "ê°œìµœ", "ì²´ê²°", "ì˜¤í”ˆ", "ì…ê³ ", "ë³€ê²½", "ë„ì…", "í™•ì¸", "ì¼ì •"]);
      const hasInterpret = hasAny(t, ["ì˜ë¯¸", "ê°•í™”", "ì‹œë„ˆì§€", "í˜ì‹ ", "ê°€ì¹˜", "ì„ ë„", "ì°¨ë³„í™”"]);
      let level = "g";
      if(hasInterpret && !hasFactWords && !hasNums) level = "r";
      else if(hasInterpret) level = "y";
      items.push(makeItem(
        "ì‚¬ì‹¤ê³¼ í•´ì„ì´ ë¶„ë¦¬ë˜ëŠ”ê°€",
        level,
        level === "g" ? "ì‚¬ì‹¤ ë‹¨ì„œê°€ ìˆê±°ë‚˜, ê³¼ë„í•œ í•´ì„ í‘œí˜„ì´ ë‘ë“œëŸ¬ì§€ì§€ ì•ŠìŠµë‹ˆë‹¤." :
        (level === "y" ? "í•´ì„ í‘œí˜„ì´ ì„ì—¬ ìˆìŠµë‹ˆë‹¤. ì‚¬ì‹¤(ì–¸ì œ/ë¬´ì—‡ì„/ëˆ„ê°€)ì„ ë¨¼ì € ë‘ê³ , í•´ì„ì€ ë’¤ë¡œ ë¶„ë¦¬í•˜ë©´ ì•ˆì •ì ì…ë‹ˆë‹¤." :
         "í•´ì„/í‰ê°€ í‘œí˜„ë§Œ ë‘ë“œëŸ¬ì§‘ë‹ˆë‹¤. ì‚¬ì‹¤/ê·¼ê±°ë¥¼ ë¨¼ì € ì œì‹œí•˜ì§€ ì•Šìœ¼ë©´ íŒë‹¨ìê°€ ë©ˆì¶œ ê°€ëŠ¥ì„±ì´ í½ë‹ˆë‹¤.")
      ));

      // 3) ì¥í™©í•¨(ë¶„ëŸ‰/ë¬¸ë‹¨)
      const tooLong = t.length > 900 || lines.length >= 7;
      const midLong = t.length > 650 || lines.length >= 5;
      items.push(makeItem(
        "í•µì‹¬ì´ ì•ì—ì„œ ì¡íˆëŠ”ê°€(ì¥í™©í•¨)",
        tooLong ? "r" : (midLong ? "y" : "g"),
        tooLong ? "ê¸´ ë¬¸ì„œë¡œ ì¸ì‹ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•µì‹¬ ê²°ë¡ /ìš”ì²­ì„ 1~2ë¬¸ì¥ìœ¼ë¡œ ì•ì— ê³ ì •í•˜ê³  ë¬¸ë‹¨ì„ ìª¼ê°œì„¸ìš”." :
        (midLong ? "í•µì‹¬ì´ ë¶„ì‚°ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. â€˜ê²°ë¡  1ì¤„ â†’ ê·¼ê±°â€™ ìˆœì„œë¡œ ì••ì¶•í•˜ë©´ ì¢‹ìŠµë‹ˆë‹¤." :
         "ê¸¸ì´/ë¬¸ë‹¨ ìˆ˜ê°€ ê³¼ë„í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.")
      ));

      // 4) ì—°ê²°ì–´(ë…¼ë¦¬ íë¦„)
      const hasConnect = hasAny(t, ["ë”°ë¼ì„œ","ê·¸ëŸ¬ë‚˜","í•˜ì§€ë§Œ","ë˜í•œ","íŠ¹íˆ","í•œí¸","ë•Œë¬¸ì—","ë°˜ë©´","ì´ì— ë”°ë¼"]);
      items.push(makeItem(
        "ë¬¸ë‹¨/ë¬¸ì¥ ì—°ê²°ì´ ë“œëŸ¬ë‚˜ëŠ”ê°€",
        (!hasConnect && lines.length >= 4) ? "y" : "g",
        (!hasConnect && lines.length >= 4)
          ? "ë¬¸ë‹¨ ì‚¬ì´ ë…¼ë¦¬ ê´€ê³„ê°€ ìˆ¨ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì—°ê²°ì–´ë¡œ â€˜ì™œ ì´ ë¬¸ì¥ì´ ë‹¤ìŒ ë¬¸ì¥ìœ¼ë¡œ ê°€ëŠ”ì§€â€™ë¥¼ ë“œëŸ¬ë‚´ì„¸ìš”."
          : "ì—°ê²° íë¦„ ë‹¨ì„œê°€ ìˆìŠµë‹ˆë‹¤."
      ));

      // 5) ê·¼ê±°/ì¶œì²˜/ìˆ˜ì¹˜(í•„ìš” ì‹œ)
      const hasEvidence = /(\d+(\.\d+)?%|\d{1,3}(,\d{3})+|\d+ëª…|\d+ê±´|\d+íšŒ|\d+ì›)/.test(t) || hasAny(t, ["ê·¼ê±°","ë°ì´í„°","ìˆ˜ì¹˜","ì¶œì²˜","ì°¸ê³ ","ë§í¬"]);
      items.push(makeItem(
        "ê·¼ê±° ë‹¨ì„œ(ìˆ˜ì¹˜/ì‚¬ì‹¤/ë§í¬)ê°€ ìˆëŠ”ê°€",
        hasEvidence ? "g" : "y",
        hasEvidence ? "ê·¼ê±° ë‹¨ì„œê°€ ìˆìŠµë‹ˆë‹¤." : "ê·¼ê±° ë‹¨ì„œê°€ ì•½í•©ë‹ˆë‹¤. í•„ìš”í•œ ê²½ìš° ìˆ˜ì¹˜/ì¼ì •/ë§í¬ ì¤‘ 1ê°œë§Œì´ë¼ë„ ë¶™ì´ë©´ ì„¤ë“ë ¥ì´ ì•ˆì •ë©ë‹ˆë‹¤."
      ));

      return items;
    }

    function categoryChecks(category, text){
      const t = norm(text);
      const lines = splitLines(text);
      const items = [];

      if(category === "internal_notice"){
        const hasPurpose = hasAny(t, ["ì•ˆë‚´ë“œë¦½ë‹ˆë‹¤","ê³µì§€ë“œë¦½ë‹ˆë‹¤","ê³µìœ ë“œë¦½ë‹ˆë‹¤","ì•„ë˜ì™€ ê°™ì´","ë‹¤ìŒ ì‚¬í•­"]) || hasAny(lines[0] || "", ["ì•ˆë‚´","ê³µì§€","[ì•ˆë‚´]","[ê³µì§€]"]);
        items.push(makeItem(
          "ìš©ê±´(ì²« í™”ë©´) ëª…ì‹œ",
          hasPurpose ? "g" : "y",
          hasPurpose ? "ìš©ê±´ì„ ì•Œë¦¬ëŠ” í‘œí˜„ì´ ê°ì§€ë©ë‹ˆë‹¤." : "ì²« ë¬¸ë‹¨ì—ì„œ ìš©ê±´ì´ ëšœë ·í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. â€˜ë¬´ì—‡ì„ ì•ˆë‚´í•˜ëŠ”ì§€â€™ë¥¼ 1ë¬¸ì¥ìœ¼ë¡œ ë¨¼ì € ì œì‹œí•˜ì„¸ìš”."
        ));

        const hasTarget = hasAny(t, ["ì „ ì§ì›","ì „ì‚¬","í•´ë‹¹ ë¶€ì„œ","ëŒ€ìƒ","ê° íŒ€","ì „ êµ¬ì„±ì›"]);
        items.push(makeItem(
          "ëŒ€ìƒ/ë²”ìœ„",
          hasTarget ? "g" : "y",
          hasTarget ? "ëŒ€ìƒ/ë²”ìœ„ ë‹¨ì„œê°€ ë³´ì…ë‹ˆë‹¤." : "ëˆ„ê°€ ì ìš© ëŒ€ìƒì¸ì§€ê°€ íë¦¿í•©ë‹ˆë‹¤. â€˜ëŒ€ìƒ/ë²”ìœ„â€™ë¥¼ 1ì¤„ë¡œ ë¶„ë¦¬í•˜ì„¸ìš”."
        ));

        const hasSteps = hasAny(t, ["ì‹ ì²­","ì‘ì„±","ì œì¶œ","í™•ì¸","ë‹¤ìš´ë¡œë“œ","ì°¸ì—¬"]) && hasAny(t, ["ë°©ë²•","ê²½ë¡œ","ì ˆì°¨","â†’","1.","2.","â€¢","- "]);
        items.push(makeItem(
          "í–‰ë™/ì ˆì°¨(ë¬´ì—‡ì„ ì–´ë–»ê²Œ)",
          hasSteps ? "g" : "y",
          hasSteps ? "ì ˆì°¨/ê²½ë¡œ ì‹ í˜¸(ë²ˆí˜¸/ë¶ˆë¦¿/ê²½ë¡œ)ê°€ ë³´ì…ë‹ˆë‹¤." : "í–‰ë™/ì ˆì°¨ê°€ ë¬¸ì¥ ì†ì— ë¬»í ìˆ˜ ìˆìŠµë‹ˆë‹¤. â€˜ê²½ë¡œ/ë°©ë²•â€™ì„ ë²ˆí˜¸ë‚˜ ë¶ˆë¦¿ìœ¼ë¡œ ë¶„ë¦¬í•˜ì„¸ìš”."
        ));

        const dates = extractDates(t);
        const hasDeadline = dates.length > 0 || hasAny(t, ["ê¹Œì§€","ë§ˆê°","ê¸°í•œ","ê¸°ê°„"]);
        items.push(makeItem(
          "ê¸°í•œ/ì‹œì ",
          hasDeadline ? "g" : "y",
          hasDeadline ? "ê¸°í•œ/ì‹œì  ë‹¨ì„œê°€ ë³´ì…ë‹ˆë‹¤." : "ê¸°í•œ/ì‹œì  ë‹¨ì„œê°€ ì•½í•©ë‹ˆë‹¤. í•„ìš”í•œ ê²½ìš° â€˜ì–¸ì œê¹Œì§€/ì–¸ì œë¶€í„°â€™ë¥¼ ëª…ì‹œí•˜ì„¸ìš”."
        ));

        const hasException = hasAny(t, ["ë‹¨,","ë‹¤ë§Œ","ìœ ì˜","ì£¼ì˜","â€»","ì°¸ê³ :","ì˜ˆì™¸"]);
        items.push(makeItem(
          "ì£¼ì˜/ì˜ˆì™¸(í•„ìš” ì‹œ) ë¶„ë¦¬",
          hasException ? "g" : "y",
          hasException ? "ì£¼ì˜/ì˜ˆì™¸ ì‹ í˜¸ê°€ ìˆìŠµë‹ˆë‹¤." : "ì£¼ì˜/ì˜ˆì™¸ê°€ í•„ìš”í•œ ê¸€ì´ë¼ë©´, â€˜ë‹¨/ìœ ì˜ì‚¬í•­â€™ì„ ë³„ë„ ë¼ì¸ìœ¼ë¡œ ë¶„ë¦¬í•˜ì„¸ìš”."
        ));

        const c = extractContacts(t);
        const hasContact = hasAny(t, ["ë¬¸ì˜","ë‹´ë‹¹"]) || c.emails.length > 0 || c.phones.length > 0;
        items.push(makeItem(
          "ë¬¸ì˜ ê²½ë¡œ",
          hasContact ? "g" : "y",
          hasContact ? "ë¬¸ì˜/ë‹´ë‹¹ ë‹¨ì„œê°€ ìˆìŠµë‹ˆë‹¤." : "ë¬¸ì˜ ê²½ë¡œê°€ ì—†ìœ¼ë©´ ì§ˆë¬¸ì´ ëŠ˜ ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•„ìš” ì‹œ â€˜ë¬¸ì˜: ë‹´ë‹¹/ë©”ì¼â€™ 1ì¤„ì„ ì¶”ê°€í•˜ì„¸ìš”."
        ));
      }

      if(category === "work_report"){
        const head = lines[0] || "";
        const hasTag = /^\s*\[(ê³µìœ |ìš”ì²­|ê²°ì •|ë³´ê³ )\]/.test(head) || hasAny(head, ["ê³µìœ ","ìš”ì²­","ê²°ì •","ë³´ê³ "]);
        items.push(makeItem(
          "ë³´ê³  ìœ í˜•(ê³µìœ /ìš”ì²­/ê²°ì •) ëª…ì‹œ",
          hasTag ? "g" : "y",
          hasTag ? "ë³´ê³  ì„±ê²© ë‹¨ì„œê°€ ì´ˆë°˜ì— ë³´ì…ë‹ˆë‹¤." : "ì´ˆë°˜ì— ë³´ê³  ì„±ê²©ì´ ë¶ˆëª…í™•í•©ë‹ˆë‹¤. ì œëª©/ì²«ì¤„ì— [ê³µìœ ]/[ìš”ì²­]/[ê²°ì •] í˜•íƒœë¡œ ê³ ì •í•´ ë³´ì„¸ìš”."
        ));

        const firstBlock = lines.slice(0,5).join(" ");
        const hasAskOrConcl = hasAny(firstBlock, ["ìš”ì²­","í™•ì¸ ë¶€íƒ","ê²°ì •","ê³µìœ ","ë³´ê³ ë“œë¦½ë‹ˆë‹¤","ê²°ì¬","ê²€í†  ë¶€íƒ","ìŠ¹ì¸"]);
        items.push(makeItem(
          "ê²°ë¡ /ìš”ì²­ ì„ ë°°ì¹˜(ì´ˆë°˜)",
          hasAskOrConcl ? "g" : "y",
          hasAskOrConcl ? "ì´ˆë°˜ì— ê²°ë¡ /ìš”ì²­ ë‹¨ì„œê°€ ìˆìŠµë‹ˆë‹¤." : "ê²°ë¡ /ìš”ì²­ì´ ì´ˆë°˜ì— ë³´ì´ì§€ ì•ŠìŠµë‹ˆë‹¤. â€˜ê²°ë¡  1ì¤„ â†’ ê·¼ê±°â€™ ìˆœìœ¼ë¡œ ì¬ë°°ì¹˜í•˜ì„¸ìš”."
        ));

        const hasEvidence = /(\d+(\.\d+)?%|\d{1,3}(,\d{3})+|\d+ëª…|\d+ê±´|\d+íšŒ|\d+ì›)/.test(t) || hasAny(t, ["í˜„í™©","ê·¼ê±°","ë°ì´í„°","ìˆ˜ì¹˜","ì¼ì •","ë¹„ìš©"]);
        items.push(makeItem(
          "ê·¼ê±°/í˜„í™©(ìµœì†Œ ë‹¨ì„œ)",
          hasEvidence ? "g" : "y",
          hasEvidence ? "ê·¼ê±°/í˜„í™© ë‹¨ì„œê°€ ìˆìŠµë‹ˆë‹¤." : "ê²°ë¡ ì„ ë’·ë°›ì¹¨í•˜ëŠ” ê·¼ê±° ë‹¨ì„œê°€ ì•½í•©ë‹ˆë‹¤. ìˆ˜ì¹˜/ì¼ì •/í˜„í™© ì¤‘ 1ê°œë¼ë„ ë¶™ì´ë©´ íŒë‹¨ì´ ë¹¨ë¼ì§‘ë‹ˆë‹¤."
        ));

        const hasOptions = hasAny(t, ["ì˜µì…˜","ì•ˆ","ëŒ€ì•ˆ","ì„ íƒì§€","Aì•ˆ","Bì•ˆ"]) || countMatches(t, /\b(1\)|2\)|3\)|â‘ |â‘¡|â‘¢)\b/g) >= 2;
        items.push(makeItem(
          "ê²°ì • í¬ì¸íŠ¸(ì˜µì…˜/ìš”ì²­) ë¶„ë¦¬",
          hasOptions || hasAny(t,["ê²°ì •","í™•ì •","ìŠ¹ì¸","ì˜ê²¬"]) ? "g" : "y",
          (hasOptions || hasAny(t,["ê²°ì •","í™•ì •","ìŠ¹ì¸","ì˜ê²¬"])) ? "ê²°ì •/ìš”ì²­ ë‹¨ì„œê°€ ìˆìŠµë‹ˆë‹¤." : "ê²°ì •í•´ì•¼ í•  í¬ì¸íŠ¸ê°€ ë¬¸ì¥ ì†ì— ë¬»í ìˆ˜ ìˆìŠµë‹ˆë‹¤. â€˜ê²°ì • ìš”ì²­ 1ì¤„â€™ì„ ë¶„ë¦¬í•˜ì„¸ìš”."
        ));

        const hasRisk = hasAny(t, ["ë¦¬ìŠ¤í¬","ì´ìŠˆ","ìš°ë ¤","ë¬¸ì œ","ê°€ëŠ¥ì„±","ë²•","ê·œì •","ì»´í”Œë¼ì´ì–¸ìŠ¤"]);
        items.push(makeItem(
          "ë¦¬ìŠ¤í¬/ì£¼ì˜ì‚¬í•­ ë…¸ì¶œ",
          hasRisk ? "g" : "y",
          hasRisk ? "ë¦¬ìŠ¤í¬/ì£¼ì˜ ë‹¨ì„œê°€ ë³´ì…ë‹ˆë‹¤." : "ë¦¬ìŠ¤í¬/ì£¼ì˜ì‚¬í•­ì´ ì—†ë‹¤ë©´ ê´œì°®ì§€ë§Œ, ì¡´ì¬í•œë‹¤ë©´ 1ì¤„ë¡œ ë¨¼ì € ë…¸ì¶œí•´ ê²°ì¬ìë¥¼ ì•ˆì „í•˜ê²Œ ë§Œë“œì„¸ìš”."
        ));
      }

      if(category === "c_level"){
        const hasFrame = hasAny(t, ["í™˜ê²½","ë³€í™”","ì „í™˜","ë¶ˆí™•ì‹¤","ì‹œì¥","ê³ ê°","AI","ê·œì œ","ë¦¬ìŠ¤í¬","ê¸°íšŒ","êµ¬ì¡°"]);
        items.push(makeItem(
          "ìƒí™© í•´ì„(ë§¥ë½) ì œì‹œ",
          hasFrame ? "g" : "y",
          hasFrame ? "ë§¥ë½ ë‹¨ì„œê°€ ìˆìŠµë‹ˆë‹¤." : "ìƒí™© í•´ì„ì´ ì•½í•˜ë©´ ë©”ì‹œì§€ê°€ â€˜ì˜ê²¬â€™ìœ¼ë¡œ ë“¤ë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë³€í™”/ë¦¬ìŠ¤í¬/ê¸°íšŒë¥¼ 1ë¬¸ì¥ìœ¼ë¡œ ê³ ì •í•˜ì„¸ìš”."
        ));

        const hasRole = hasAny(t, ["ì—­í• ","ë°©í–¥","ì›ì¹™","ê¸°ì¤€","ìš°ë¦¬ëŠ”","ì¡°ì§","íŒ€","ì±…ì„","ì •ì˜"]);
        items.push(makeItem(
          "ì¡°ì§ì˜ ì—­í• /ë°©í–¥ ê³ ì •",
          hasRole ? "g" : "y",
          hasRole ? "ì—­í• /ë°©í–¥ ë‹¨ì„œê°€ ë³´ì…ë‹ˆë‹¤." : "ì¡°ì§ì˜ ì—­í• /ë°©í–¥ì´ ë“œëŸ¬ë‚˜ì§€ ì•Šìœ¼ë©´ ë©”ì‹œì§€ê°€ ë¶„ì‚°ë©ë‹ˆë‹¤. â€˜ìš°ë¦¬ëŠ” ë¬´ì—‡ì„ ê¸°ì¤€ìœ¼ë¡œ ì›€ì§ì¸ë‹¤â€™ë¥¼ 1ë¬¸ì¥ìœ¼ë¡œ ë„£ìœ¼ì„¸ìš”."
        ));

        const hasDirective = hasAny(t, ["ì§€ì‹œ","ë°˜ë“œì‹œ","ì¦‰ì‹œ","í•´ë¼","í•´ì•¼ í•œë‹¤","í•„ìˆ˜"]);
        items.push(makeItem(
          "ì§€ì‹œí˜• í‘œí˜„ ê³¼ë‹¤ ì—¬ë¶€",
          hasDirective ? "y" : "g",
          hasDirective ? "ì§€ì‹œí˜• í‘œí˜„ì´ ì„ì—¬ ìˆìŠµë‹ˆë‹¤. â€˜ì‹¤í–‰ ì§€ì‹œâ€™ë³´ë‹¤ â€˜ë°©í–¥/ê¸°ì¤€ ê³ ì •â€™ ì–¸ì–´ë¡œ ì¹˜í™˜í•˜ë©´ Cë ˆë²¨ í†¤ì´ ì„ ëª…í•´ì§‘ë‹ˆë‹¤." : "ì§€ì‹œí˜• í‘œí˜„ì´ ê³¼ë„í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤."
        ));

        const vagueCount = countMatches(t, /(ì˜ë¯¸|ê°•í™”|ì‹œë„ˆì§€|í™•ëŒ€|ê³ ë„í™”|ìµœì í™”|í˜ì‹ |ì„ ë„|ì°¨ë³„í™”|ê°€ì¹˜)/g);
        items.push(makeItem(
          "ì¶”ìƒì–´(ì˜ë¯¸/ê°•í™”/ì‹œë„ˆì§€ ë“±) ë°€ë„",
          vagueCount >= 3 ? "r" : (vagueCount >= 1 ? "y" : "g"),
          vagueCount >= 3 ? "ì¶”ìƒì–´ ë°€ë„ê°€ ë†’ìŠµë‹ˆë‹¤. íŒë‹¨ ê¸°ì¤€ì´ íë ¤ì§ˆ ìˆ˜ ìˆìœ¼ë‹ˆ, 1ê°œë§Œ ë‚¨ê¸°ê³  ê·¼ê±°/ì‚¬ë¡€ë¡œ ì¹˜í™˜í•˜ì„¸ìš”." :
          (vagueCount >= 1 ? "ì¶”ìƒì–´ê°€ ì¼ë¶€ ë³´ì…ë‹ˆë‹¤. ê·¼ê±°(ì‚¬ì‹¤/ì‚¬ë¡€)ì™€ ë¶™ì—¬ ì“°ë©´ ì•ˆì •ë©ë‹ˆë‹¤." : "ì¶”ìƒì–´ ë°€ë„ê°€ ë‚®ìŠµë‹ˆë‹¤.")
        ));

        const hasClosure = hasAny(t, ["ì´ ê¸°ì¤€ìœ¼ë¡œ","ì´ë¥¼ ë°”íƒ•ìœ¼ë¡œ","ì•ìœ¼ë¡œë„","í–¥í›„","ìš°ë¦¬ëŠ” ê³„ì†"]);
        items.push(makeItem(
          "ê²°ë¡ (ê¸°ì¤€/ì˜ë¯¸)ì˜ ë§ˆë¬´ë¦¬",
          hasClosure ? "g" : "y",
          hasClosure ? "ë§ˆë¬´ë¦¬ ê²°ë¡  ë‹¨ì„œê°€ ìˆìŠµë‹ˆë‹¤." : "ë§ˆë¬´ë¦¬ì—ì„œ â€˜ë¬´ì—‡ì„ ê¸°ì¤€ìœ¼ë¡œ ì´ì–´ê°ˆì§€â€™ 1ë¬¸ì¥ì„ ë„£ìœ¼ë©´ ë©”ì‹œì§€ê°€ ê³ ì •ë©ë‹ˆë‹¤."
        ));
      }

      if(category === "press_release"){
        const whyNow = hasAny(t, ["ì˜¤ëŠ˜","ì´ë²ˆ","ìµœê·¼","ì•ë‘ê³ ","ë°œí‘œ","ê°œìµœ","ì°©ìˆ˜","ì¶œì‹œ","ì˜¤í”ˆ","ì²´ê²°","ì§„í–‰"]);
        items.push(makeItem(
          "Why now(ì™œ ì§€ê¸ˆì¸ê°€)",
          whyNow ? "g" : "y",
          whyNow ? "ì‹œì /ê³„ê¸° ë‹¨ì„œê°€ ë³´ì…ë‹ˆë‹¤." : "Why nowê°€ ì•½í•©ë‹ˆë‹¤. ë°œí‘œ/í–‰ì‚¬/ë„ì… ë“± â€˜ì§€ê¸ˆì˜ ê³„ê¸°â€™ë¥¼ 1ë¬¸ì¥ìœ¼ë¡œ ëª…ì‹œí•˜ì„¸ìš”."
        ));

        const hasWhoWhat = hasAny(t, ["ë§¨íŒŒì›Œ","ë‹¹ì‚¬","íšŒì‚¬","í˜‘íšŒ","ê¸°ê´€","ê³ ê°","íŒŒíŠ¸ë„ˆ"]) && hasAny(t, ["ë°œí‘œ","ì§„í–‰","ê°œìµœ","ì²´ê²°","ì˜¤í”ˆ","ì„ ì •","ìˆ˜ìƒ"]);
        items.push(makeItem(
          "ëˆ„ê°€/ë¬´ì—‡ì„ í–ˆëŠ”ê°€(ê¸°ì‚¬ ë¼ˆëŒ€)",
          hasWhoWhat ? "g" : "y",
          hasWhoWhat ? "ê¸°ì‚¬ ë¼ˆëŒ€ ë‹¨ì„œê°€ ìˆìŠµë‹ˆë‹¤." : "ëˆ„ê°€ ë¬´ì—‡ì„ í–ˆëŠ”ì§€ ë¼ˆëŒ€ê°€ íë¦¿í•©ë‹ˆë‹¤. â€˜ì£¼ì²´-í–‰ë™-ëŒ€ìƒâ€™ì„ ì²« ë¬¸ë‹¨ì— ê³ ì •í•˜ì„¸ìš”."
        ));

        const hasEvidence = /(\d+(\.\d+)?%|\d{1,3}(,\d{3})+|\d+ëª…|\d+ê±´|\d+íšŒ|\d+ì›)/.test(t) || extractDates(t).length > 0;
        items.push(makeItem(
          "ê·¼ê±°(ìˆ˜ì¹˜/ì¼ì •) í¬í•¨",
          hasEvidence ? "g" : "y",
          hasEvidence ? "ê·¼ê±° ë‹¨ì„œ(ìˆ˜ì¹˜/ì¼ì •)ê°€ ìˆìŠµë‹ˆë‹¤." : "ê·¼ê±° ë‹¨ì„œê°€ ì•½í•©ë‹ˆë‹¤. ë‚ ì§œ/ê·œëª¨/íšŸìˆ˜ ì¤‘ 1ê°œë¼ë„ ë„£ìœ¼ë©´ ê¸°ì‚¬í™”ê°€ ì‰¬ì›Œì§‘ë‹ˆë‹¤."
        ));

        const hasVaguePromo = countMatches(t, /(ì˜ë¯¸|ê°•í™”|ì‹œë„ˆì§€|í˜ì‹ |ì„ ë„|ì°¨ë³„í™”|ê°€ì¹˜)/g) >= 2;
        items.push(makeItem(
          "í™ë³´ì„± ì¶”ìƒ í‘œí˜„ ê³¼ë‹¤ ì—¬ë¶€",
          hasVaguePromo ? "y" : "g",
          hasVaguePromo ? "ì¶”ìƒ í™ë³´ í‘œí˜„ì´ ê²¹ì¹  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 1ê°œë§Œ ë‚¨ê¸°ê³  ê·¼ê±°/ë§¥ë½ìœ¼ë¡œ ì¹˜í™˜í•˜ì„¸ìš”." : "ì¶”ìƒ í™ë³´ í‘œí˜„ì´ ê³¼ë„í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤."
        ));
        const hasQuote = /[â€œâ€"]/.test(text) || hasAny(t, ["ë§í–ˆë‹¤","ë°í˜”ë‹¤","ì„¤ëª…í–ˆë‹¤"]);
        items.push(makeItem(
          "ì¸ìš©/ë°œì–¸(í•„ìš” ì‹œ)",
          hasQuote ? "g" : "y",
          hasQuote ? "ì¸ìš©/ë°œì–¸ ë‹¨ì„œê°€ ë³´ì…ë‹ˆë‹¤." : "ê¸°ì ê´€ì ì—ì„œ â€˜ì˜ë¯¸â€™ë¥¼ ì¡ì•„ì¤„ ì¸ìš©ì´ í•„ìš”í•œ ìœ í˜•ì´ë¼ë©´ 1ê°œë§Œ ì¶”ê°€í•´ë„ ê¸°ì‚¬ ì™„ì„±ë„ê°€ ì˜¬ë¼ê°‘ë‹ˆë‹¤."
        ));
      }

      if(category === "sns"){
        const shortEnough = text.length <= 600 && lines.length <= 6;
        items.push(makeItem(
          "í•œ ë²ˆì— ì½íˆëŠ” ê¸¸ì´",
          shortEnough ? "g" : "y",
          shortEnough ? "ê¸¸ì´ê°€ ê³¼ë„í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤." : "SNSëŠ” ì§‘ì¤‘ ì‹œê°„ì´ ì§§ìŠµë‹ˆë‹¤. í•µì‹¬ ë¬¸ì¥ì„ ì•ì— ë‘ê³ , ë¬¸ì¥/ì¤„ ìˆ˜ë¥¼ ì¤„ì´ì„¸ìš”."
        ));

        const hasContext = hasAny(t, ["ì˜¤ëŠ˜","ì´ë²ˆ","ìµœê·¼","ì•ë‘ê³ ","ë°œí‘œ","ê³µìœ ","ì•ˆë‚´"]) || extractDates(t).length > 0;
        items.push(makeItem(
          "ë§¥ë½(ìƒí™©/ëŒ€ìƒ) ìµœì†Œ í¬í•¨",
          hasContext ? "g" : "y",
          hasContext ? "ë§¥ë½ ë‹¨ì„œê°€ ìˆìŠµë‹ˆë‹¤." : "ë§¥ë½ì´ ë¶€ì¡±í•˜ë©´ ì˜¤í•´ê°€ ìƒê¹ë‹ˆë‹¤. â€˜ì§€ê¸ˆ/ë¬´ìŠ¨ ì¼/ëŒ€ìƒâ€™ì„ í•œ ì¤„ë¡œ ë³´ê°•í•˜ì„¸ìš”."
        ));

        const hasCTA = hasAny(t, ["ë§í¬","í´ë¦­","í™•ì¸","ì‹ ì²­","ìì„¸íˆ","í”„ë¡œí•„","ì²¨ë¶€"]) || /https?:\/\//.test(t);
        items.push(makeItem(
          "ì˜ë„(CTA) ëª…ì‹œ",
          hasCTA ? "g" : "y",
          hasCTA ? "CTA ë‹¨ì„œê°€ ìˆìŠµë‹ˆë‹¤." : "ì˜ë„ê°€ ì•ˆë‚´/ìœ ë„ë¼ë©´ CTA(í™•ì¸/ë§í¬/ì²¨ë¶€)ë¥¼ ëª…ì‹œí•˜ì„¸ìš”."
        ));

        const hasOverClaim = hasAny(t, ["ë¬´ì¡°ê±´","ì ˆëŒ€","ì™„ë²½","ìµœê³ ","ì—­ëŒ€","ì¶©ê²©","ëŒ€ë°•"]);
        items.push(makeItem(
          "ë‹¨ì •/ê³¼ì‰ í™•ì‹  í‘œí˜„",
          hasOverClaim ? "y" : "g",
          hasOverClaim ? "ë‹¨ì •/ê³¼ì‰ í™•ì‹  í‘œí˜„ì´ ì˜¤í•´ë¥¼ ë¶€ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. í‘œí˜„ ê°•ë„ë¥¼ ë‚®ì¶”ë©´ ì•ˆì „í•©ë‹ˆë‹¤." : "í‘œí˜„ ê°•ë„ê°€ ê³¼ë„í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤."
        ));

        const vagueCount = countMatches(t, /(ì˜ë¯¸|ê°•í™”|ì‹œë„ˆì§€|í˜ì‹ |ì„ ë„|ì°¨ë³„í™”|ê°€ì¹˜)/g);
        items.push(makeItem(
          "ì¶”ìƒì–´ ë°€ë„",
          vagueCount >= 2 ? "y" : "g",
          vagueCount >= 2 ? "ì¶”ìƒì–´ê°€ ë°˜ë³µë˜ë©´ ë©”ì‹œì§€ê°€ íë ¤ì§‘ë‹ˆë‹¤. 1ê°œë§Œ ë‚¨ê¸°ê³  ì‚¬ì‹¤/ì‚¬ë¡€ë¡œ ì¹˜í™˜í•˜ì„¸ìš”." : "ì¶”ìƒì–´ ë°€ë„ê°€ ê³¼ë„í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤."
        ));
      }

      return items;
    }

    function renderList(el, items){
      el.innerHTML = "";
      items.forEach(it => {
        const li = document.createElement("li");
        const icon = it.level === "g" ? "ğŸŸ¢" : (it.level === "y" ? "ğŸŸ¡" : "ğŸ”´");
        li.innerHTML = `<b>${icon} ${it.title}</b><div class="muted" style="margin-top:4px">${it.msg}</div>`;
        el.appendChild(li);
      });
    }

    function renderKpi(el, allItems){
      const s = summarize(allItems);
      el.innerHTML = "";
      const mk = (dotCls, label, n) => {
        const span = document.createElement("span");
        span.className = "pill";
        span.innerHTML = `<span class="dot ${dotCls}"></span> ${label}: <b>${n}</b>`;
        return span;
      };
      el.appendChild(mk("g","ğŸŸ¢", s.g));
      el.appendChild(mk("y","ğŸŸ¡", s.y));
      el.appendChild(mk("r","ğŸ”´", s.r));
    }

    // UI ë°”ì¸ë”©
    function escapeHtml(str){
      return String(str)
        .replace(/&/g, '&amp;')
        .replace(/</g, '&lt;')
        .replace(/>/g, '&gt;')
        .replace(/"/g, '&quot;')
        .replace(/'/g, '&#39;');
    }

    const categoryEl = document.getElementById("category");
    const hintEl = document.getElementById("categoryHint");
    const textEl = document.getElementById("inputText");
    const counterEl = document.getElementById("counter");
    const btnEl = document.getElementById("checkBtn");

    function setHint(){
      const c = categoryEl.value;
      hintEl.textContent = categoryMeta[c].hint;
    }
    categoryEl.addEventListener("change", setHint);
    setHint();

    function updateCounter(){
      let val = textEl.value;
      if(val.length > MAX_LEN){
        textEl.value = val.slice(0, MAX_LEN);
      }
      const len = textEl.value.length;
      counterEl.textContent = `${len} / ${MAX_LEN}`;
      btnEl.disabled = textEl.value.trim().length === 0;
    }
    textEl.addEventListener("input", updateCounter);
    updateCounter();

    function runCheck(){
      const category = categoryEl.value;
      const text = textEl.value.trim();
      if(!text){
        return;
      }

      const common = commonChecks(text);
      const cat = categoryChecks(category, text);
      const all = [...common, ...cat];
      const verdict = verdictFrom(all);

      const badge = document.getElementById("verdictBadge");
      const msg = document.getElementById("verdictMsg");
      const kpi = document.getElementById("kpiRow");
      const commonList = document.getElementById("commonList");
      const categoryList = document.getElementById("categoryList");

      const label = categoryMeta[category].label;

      // ìƒë‹¨ ìš”ì•½(ì‹ í˜¸)
      if(verdict === "GREEN"){
        badge.className = "badge bGreen";
        badge.textContent = "ğŸŸ¢ ì˜ë¯¸ê°€ ë¹„êµì  ëª…í™•í•¨";
        msg.textContent = `${label} ê´€ì ì—ì„œ ì˜¤í•´ì˜ ì—¬ì§€ê°€ ì ê³  ì‰½ê²Œ ì´í•´ë  ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤.`;
      }else if(verdict === "YELLOW"){
        badge.className = "badge bYellow";
        badge.textContent = "ğŸŸ¡ ì˜¤í•´ì˜ ì—¬ì§€ ìˆìŒ";
        msg.textContent = `${label} ê´€ì ì—ì„œ ì¼ë¶€ ë¬¸ì¥ì´ ì˜¤í•´ì˜ ì—¬ì§€ê°€ ìˆìŠµë‹ˆë‹¤. ì•„ë˜ í•­ëª©ì„ ìš°ì„  ë³´ì™„í•˜ì„¸ìš”.`;
      }else{
        badge.className = "badge bRed";
        badge.textContent = "ğŸ”´ ì˜¤í•´ ê°€ëŠ¥ì„± í¼";
        msg.textContent = `${label} ê´€ì ì—ì„œ ì˜¤í•´ ê°€ëŠ¥ì„±ì´ í½ë‹ˆë‹¤. ë§¥ë½Â·ê·¼ê±° ë³´ì™„ì´ í•„ìš”í•©ë‹ˆë‹¤.`;
      }

      // KPI(ê³µí†µ/ì¹´í…Œê³ ë¦¬ë³„ ìš”ì•½)
      const cs = summarize(common);
      const ks = summarize(cat);
      kpi.innerHTML = "";
      kpi.insertAdjacentHTML("beforeend", `<span class="pill"><span class="dot g"></span>ê³µí†µ ğŸŸ¢ ${cs.g}</span>`);
      kpi.insertAdjacentHTML("beforeend", `<span class="pill"><span class="dot y"></span>ê³µí†µ ğŸŸ¡ ${cs.y}</span>`);
      kpi.insertAdjacentHTML("beforeend", `<span class="pill"><span class="dot r"></span>ê³µí†µ ğŸ”´ ${cs.r}</span>`);
      kpi.insertAdjacentHTML("beforeend", `<span class="pill"><span class="dot g"></span>${label} ğŸŸ¢ ${ks.g}</span>`);
      kpi.insertAdjacentHTML("beforeend", `<span class="pill"><span class="dot y"></span>${label} ğŸŸ¡ ${ks.y}</span>`);
      kpi.insertAdjacentHTML("beforeend", `<span class="pill"><span class="dot r"></span>${label} ğŸ”´ ${ks.r}</span>`);

      // ë¦¬ìŠ¤íŠ¸ ë Œë”
      function renderList(ul, items){
        ul.innerHTML = "";
        if(!items || items.length === 0){
          const li = document.createElement("li");
          li.textContent = "í•´ë‹¹ í•­ëª© ì—†ìŒ";
          ul.appendChild(li);
          return;
        }
        items.forEach(i => {
          const li = document.createElement("li");
          const emoji = i.level === "g" ? "ğŸŸ¢" : (i.level === "y" ? "ğŸŸ¡" : "ğŸ”´");
          li.innerHTML = `<b>${emoji} ${escapeHtml(i.title)}</b><div class="muted" style="margin-top:4px">${escapeHtml(i.msg)}</div>`;
          ul.appendChild(li);
        });
      }

      renderList(commonList, common);
      renderList(categoryList, cat);

      // ê²°ê³¼ ë…¸ì¶œ
      const wrap = document.getElementById("resultWrap");
      wrap.style.display = "block";
      wrap.scrollIntoView({ behavior: "smooth", block: "start" });
    }

    // TODO (í–¥í›„ AI ì—°ê²°):
    // runCheck() ë‚´ë¶€ì—ì„œ evaluate() ëŒ€ì‹  fetch('/api/check', ...)ë¡œ JSONì„ ë°›ì•„
    // ê°™ì€ UI ë Œë”ë§ í•¨ìˆ˜ë¡œ í‘œì‹œí•˜ë©´ êµ¬ì¡° ë³€ê²½ ì—†ì´ AIë¡œ ì¹˜í™˜ ê°€ëŠ¥í•©ë‹ˆë‹¤.
  </script>

</body>
</html>
 
